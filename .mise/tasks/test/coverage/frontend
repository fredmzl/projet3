#!/usr/bin/env bash
#MISE description="G√©n√®re le rapport de couverture des tests frontend"
set -e

echo "üìä G√©n√©ration du rapport de couverture des tests frontend..."
echo "================================================================"

cd frontend

# Ex√©cution des tests avec g√©n√©ration de la couverture
npm run test:coverage

REPORT_PATH="${MISE_CONFIG_ROOT}/frontend/coverage/frontend/index.html"

if [ -f "$REPORT_PATH" ]; then
    mise run doc:restart 2>/dev/null || true
    echo ""
    echo "================================================================"
    echo "‚úÖ Rapport de couverture g√©n√©r√©!"
    echo ""
    echo "üåê Ouvrir le rapport: firefox ${REPORT_PATH}"
    echo "   ou: xdg-open ${REPORT_PATH}"
else
    echo "‚ùå Failed to generate coverage report"
    exit 1
fi


